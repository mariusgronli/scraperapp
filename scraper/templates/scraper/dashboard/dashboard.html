{% extends "scraper/dashboard/base.html" %}
{% load static %}
{% block content %}

<div class="content-container"> <!-- Start summary-->
  <div class="container-fluid">
    <div class="container">

      <div class="text-left">
        <h3>House market tracker: </h3>
      </div>
      <hr>

      <div class="row">
        <div class="col-lg text-center">
          <h5>Value scanned: <h2>{{value}}NOK</h2></h5>
        </div>

        <div class="col-lg">
          <div class="row">
            <div class="col-lg">
              <p>Last day increase/decrease</p>
            </div>
            <div class="col-lg">
              <p>Last day added value scanned</p>
            </div>
          </div>

          <div class="row">

            <div class="col-lg">
              <h4 style="color:green;">{{portsummary.ld_percent_change}}4%</h4>
            </div>

            <div class="col-lg">
              <h4 style="color:green;">+{{last_day}}NOK</h4>
            </div>

          </div>
        </div>
      </div> <!-- end

         summary-->
      <hr>


    </div>
  </div>
</div>

<div class="content-container"> <!-- Start cards-->
  <div class="container-fluid">
    <div class="container">
      <!-- Card and modal for expected return-->
      <div class="card-deck">
      <div class="card text-white bg-dark">
        <div class="card-body ">
          <h5 class="card-title text-center">Ads scanned</h5>
          <hr>
          <br>
            <h2 class="card-text text-center" style="color:#ffffb8;">{{listings}}</h2>
        </div>
        <div class="card-footer">
          <div class="row">
            <div class="col-lg-10">
              <small class="text-muted">Last updated: {{daily_scan.date}}</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Card and Modal for volatility-->
      <div class="card text-white bg-dark">
        <div class="card-body">
          <h5 class="card-title text-center">Markets being tracked</h5>
          <hr>
          <br>
            <h2 class="card-text text-center" style="color:#a6ec8f">{{markets}}</h2>
        </div>
        <div class="card-footer">
          <div class="row">
            <div class="col-lg-10">
              <small class="text-muted">Last updated: {{daily_scan.date}}</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Card and Modal for Sharpe ratio-->
      <div class="card text-white bg-dark">
        <div class="card-body">
          <h5 class="card-title text-center">Highest Price/SQM</h5>
          <hr>
          <br>
            <h5 class="card-text text-center" style="color:white;">{{high_price_sqm_market}}</h5>
            <h3 class="card-text text-center" style="color:#ec8f8f;">{{high_price_sqm_value}}NOK</h3>
        </div>
        <div class="card-footer">
          <div class="row">
            <div class="col-lg-10">
              <small class="text-muted">Last updated: {{daily_scan.date}}</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Card and Modal for Beta-->
      <div class="card text-white bg-dark">
        <div class="card-body">
          <h5 class="card-title text-center">Lowest Price/SQM</h5>
          <hr>
          <br>
          <h5 class="card-text text-center" style="color:white;">{{low_price_sqm_market}}</h5>
          <h3 class="card-text text-center" style="color:#a6ec8f;">{{low_price_sqm_value}}NOK</h3>
        </div>
        <div class="card-footer">
          <div class="row">
            <div class="col-lg-10">
              <small class="text-muted">Last updated: {{daily_scan.date}}</small>
            </div>
          </div>
        </div>
      </div>
    </div><!-- End card deck -->
    <br><br>


    <div class="row">
      <div class="col-lg">
        <div class="card shadow border-bottom-red">
          <div class="card-body text-center">
              <h5>Diagnostics from scan: {{daily_scan.date}} </h5>
          </div>
        </div>
      </div>
    </div>

    <br><br>
    <div class="row justify-content-center">
      <div class="card-deck w-100">
        <!--Listings searched card-->
        <div class="card shadow card-searched">
          <div class="row text-center">
            <div class="col-md-4">
              <span>
              <i class="fas fa-search fa-searched"></i>
              </span>
            </div>
            <div class="col-md-8">
              <br>
              <div class="card-body">
                <h5>{{daily_scan.ads_searched}}</h5>
                <p class="lead">Listings searched</p>
              </div>
            </div>
          </div>
        </div>
        <!--Not populated card-->
        <div class="card shadow card-not-populated">
          <div class="row text-center">
            <div class="col-md-4">
              <span>
              <i class="fas fa-hand-paper fa-not-populated"></i>
              </span>
            </div>
            <div class="col-md-8">
              <br>
              <div class="card-body">
                <h5>{{not_populated}}</h5>
                <p class="lead">Listings not populated</p>
              </div>
            </div>
          </div>
        </div>
      </div><!-- End card deck -->
    </div> <!-- End row -->
    <br><br>
    <div class="row justify-content-center">
      <div class="card-deck w-100">
        <!--complexes card-->
        <div class="card shadow card-apartment-complex">
          <div class="row text-center">
            <div class="col-md-4">
              <span>
              <i class="fas fa-building fa-apartment-complex"></i>
              </span>
            </div>
            <div class="col-md-8">
              <br>
              <div class="card-body">
                <h5>{{daily_scan.error_complex}}</h5>
                <p class="lead">Apartment complexes</p>
              </div>
            </div>
          </div>
        </div>
        <!--Error card-->
        <div class="card shadow card-error">
          <div class="row text-center">
            <div class="col-md-4">
              <span>
              <i class="fas fa-bug fa-error"></i>
              </span>
            </div>
            <div class="col-md-8">
              <br>
              <div class="card-body">
                <h5>{{daily_scan.error_price_sqm}}</h5>
                <p class="lead">Could not find price or mÂ²</p>
              </div>
            </div>
          </div>
        </div>
      </div><!-- End card deck -->
    </div> <!-- End row -->
    <br><br>

    <div class="row">
      <div class="col-lg">
        <div class="card shadow">
          <div class="card-header text-center">
            <p class="lead">Listings with error</p>
          </div>
          <div class="card-body">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">URL</th>
                  <th scope="col">Error</th>
                  <th scope="col">date</th>
                </tr>
              </thead>
              <tbody>
                {% for error in error_listings %}
                <tr>
                  <td><a href="{{error.listing}}" style="color:black;font-size:0.8rem;">{{error.listing}}</a></td>
                  <td>{{error.error_message}}</td>
                  <td>{{error.date}}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    </div>
  </div>
</div>

<br>
<br>


{% endblock %}
